"use strict";(self.webpackChunksky=self.webpackChunksky||[]).push([[439],{7713:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var a=t(1413),r=t(885),i=t(2791),o=t(4802),s=t(8782),l=t(4569),u=t.n(l),c={addChannelGroup:function(e){var n="".concat("https://localhost:44357/api/","ChannelGroup/AddChannelGroup");return u().post(n,e)},updateChannelGroup:function(e,n){var t="".concat("https://localhost:44357/api/","ChannelGroup/").concat(e);return u().put(t,n)},getChannelGroups:function(e){var n="".concat("https://localhost:44357/api/","ChannelGroup").concat(e);return u().get(n)},getChannelGroup:function(e){var n="".concat("https://localhost:44357/api/","ChannelGroup/").concat(e);return u().get(n)},exportChannelGroups:function(e){var n="".concat("https://localhost:44357/api/","ChannelGroup/Export").concat(e);return u().get(n,{responseType:"arraybuffer"})},getOrganisations:function(){var e="".concat("https://localhost:44357/api/","Organisation/GetAllOrganisations");return u().get(e)},getChannels:function(e){var n="".concat("https://localhost:44357/api/","Channel/GetChannelList").concat(e);return u().get(n)},getChannelsByGroup:function(e){var n="".concat("https://localhost:44357/api/","Channel/GetChannelByGroup?id=").concat(e);return u().get(n)}},p=t(6033),m=t(392),d={tableHeaders:[{headerId:1,headerName:"Organisation",filter:{type:1,queryNames:["organisationFilter","organisationFilterValue"]},sortable:!0},{headerId:2,headerName:"Group",filter:{type:1,queryNames:["groupFilter","groupFilterValue"]},sortable:!0},{headerId:6,headerName:"Status",filter:{type:2,queryNames:["statusFilter"],list:[{id:1,name:"Active"},{id:2,name:"Inactive"}]},sortable:!0},{headerId:3,headerName:"Runs",filter:{type:5,queryNames:["runsFilter","runsFilterValue"]},sortable:!0},{headerId:4,headerName:"Top Rated",filter:{type:5,queryNames:["topRatedFilter","topRatedFilterValue"]},sortable:!0},{headerId:5,headerName:"Channel(s)",filter:{type:1,queryNames:["channelFilter","channelFilterValue"]},sortable:!0}],formFields:[{name:"Organisation",parameterName:"organisationID",type:"text",placeHolder:"Enter the organisation name",isRequired:!0,maxLength:99},{name:"Status",parameterName:"status",type:"text",placeHolder:"Enter the Status",isRequired:!0,maxLength:99},{name:"Channel Group Name",parameterName:"name",type:"text",placeHolder:"Enter the channel group name",isRequired:!0,maxLength:99},{name:"Number of schedule runs",parameterName:"maxRuns",type:"number",placeHolder:"Enter the number of schedule runs",isRequired:!0,maxLength:99},{name:"Number of top rated schedules",parameterName:"topX",type:"number",placeHolder:"Enter the number of top rated schedules",isRequired:!0,maxLength:99}],editFormFields:[{name:"Organisation",parameterName:"organisationID",type:"text",placeHolder:"Enter the organisation name",isRequired:!0,maxLength:99},{name:"Status",parameterName:"status",type:"text",placeHolder:"Enter the Status",isRequired:!0,maxLength:99},{name:"Channel Group Name",parameterName:"name",type:"text",placeHolder:"Enter the channel group name",isRequired:!0,maxLength:99},{name:"Number of schedule runs",parameterName:"maxRuns",type:"number",placeHolder:"Enter the number of schedule runs",isRequired:!0,maxLength:99},{name:"Number of top rated schedules",parameterName:"topX",type:"number",placeHolder:"Enter the number of top rated schedules",isRequired:!0,maxLength:99}],statusList:[{id:"1",name:"Active"},{id:"2",name:"Inactive"}],checkString:function(e){return""!==e&&null!==e&&void 0!==e},maxRuns:214e7},h=t(2677),g=t(4942),x="ChannelGroup_box__uku-3",f="ChannelGroup_closeIcon__1LcTE",Z="ChannelGroup_headerText__82h2U",N="ChannelGroup_formLabel__YgPvh",y="ChannelGroup_formInput__I-jwk",C="ChannelGroup_saveIcon__mDOwF",v="ChannelGroup_closeCircleIcon__me5aj",b="ChannelGroup_hasError__DGQqD",G="ChannelGroup_required__diJVT",S="ChannelGroup_formWrapper__Bbkn+",j=t(4065),F=t(5142),I=t(3234),R=t(9639),D=t(2632),_=t(8557),k=t(184);function w(e){var n=e.callbackClosePanel,t=e.callbackGetChannelGroups,o=e.channelGroups,s=d.formFields,l=d.checkString,u=d.maxRuns,p=d.statusList,h=(0,i.useState)(""),w=(0,r.Z)(h,2),V=w[0],X=w[1],L=(0,i.useState)(!1),q=(0,r.Z)(L,2),O=q[0],E=q[1],B=(0,i.useState)({name:"",organisationID:0,maxRuns:"",topX:"",indicatorStatus:1}),A=(0,r.Z)(B,2),H=A[0],P=A[1],K=(0,i.useState)("Select Organisation"),z=(0,r.Z)(K,2),T=z[0],M=z[1],J=(0,i.useState)("Active"),U=(0,r.Z)(J,2),W=U[0],Q=U[1],Y=(0,i.useState)([]),$=(0,r.Z)(Y,2),ee=$[0],ne=$[1],te=(0,i.useState)({name:!1,organisation:!1,maxRuns:!1,topX:!1}),ae=(0,r.Z)(te,2),re=ae[0],ie=ae[1],oe=(0,i.useState)(""),se=(0,r.Z)(oe,2),le=se[0],ue=se[1],ce=(0,i.useState)(""),pe=(0,r.Z)(ce,2),me=pe[0],de=pe[1],he=(0,i.useState)(""),ge=(0,r.Z)(he,2),xe=ge[0],fe=ge[1],Ze=(0,i.useState)(""),Ne=(0,r.Z)(Ze,2),ye=Ne[0],Ce=Ne[1],ve=function(e){P((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,g.Z)({},e.target.name,e.target.value))}))},be=function(){var e,n,t=!0;return ie({name:!1,organisation:!1,maxRuns:!1,topx:!1}),ue(""),de(""),fe(""),Ce(""),0===H.organisationID&&(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{organisation:!0})})),de("Organisation is required")),l(H.name)?(e=H.name,n=H.organisationID,o.some((function(t){return t.channelGroupName.toLowerCase()===e.trim().toLowerCase()&&t.organisationID===n}))&&(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{name:!0})})),ue("Channel group name is used"))):(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{name:!0})})),ue("Channel group name is required")),l(H.maxRuns)?parseInt(H.maxRuns,10)>u?(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxRuns:!0})})),fe("Maximum runs is ".concat(u))):parseInt(H.maxRuns,10)<1&&(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxRuns:!0})})),fe("Minimum runs is 1")):(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxRuns:!0})})),fe("Number of schedule runs is required")),l(H.topX)?parseInt(H.topX,10)<1?(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{topX:!0})})),Ce("Minimum top rated is 1")):l(H.maxRuns)&&parseInt(H.maxRuns,10)<parseInt(H.topX,10)&&(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{topX:!0})})),Ce("Cannot be more than the number of schedule runs")):(t=!1,ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{topX:!0})})),Ce("Number of top rated schedules is required")),t},Ge=function(){if(X(""),E(!0),!O)if(be()){var e={name:H.name,organisationID:H.organisationID,channelGroupId:H.channelGroupId,maxRuns:H.maxRuns.toString(),topX:H.topX.toString(),indicatorStatus:H.indicatorStatus};c.addChannelGroup(e).then((function(){n(),t(),(0,D.Vp)("Channel group created successfully")})).catch((function(e){var n=e.response.data.message;(0,D.h)(n)})).finally((function(){E(!1)}))}else E(!1),(0,D.h)("Please check required fields")},Se=function(e){M(e.name),P((function(n){return(0,a.Z)((0,a.Z)({},n),{},{organisationID:e.id})}))},je=function(e){Q(e.name),P((function(n){return(0,a.Z)((0,a.Z)({},n),{},{indicatorStatus:e.id})}))};(0,i.useEffect)((function(){var e=m.Z.getUserIdentity().organisationId,n=m.Z.isOrganisationalAdmin();M("Select Organisation"),E(!0),c.getOrganisations().then((function(e){var n=[],t=e.data.organisations,a=[];t.map((function(e){return a.push({id:e.id,name:e.name}),n.push(e.id),!0})),ne(a),E(!1)})),n&&P((0,a.Z)((0,a.Z)({},H),{},{organisationID:e}))}),[]);var Fe=function(e){return"name"===e.parameterName?le:"organisationID"===e.parameterName?me:"maxRuns"===e.parameterName?xe:"topX"===e.parameterName?ye:""},Ie=function(e){return"name"===e.parameterName?re.name:"organisationID"===e.parameterName?re.organisation:"maxRuns"===e.parameterName?re.maxRuns:"topX"===e.parameterName&&re.topX};return(0,k.jsxs)("div",{className:x,children:[(0,k.jsx)("div",{className:"position-relative",children:(0,k.jsx)("i",{children:(0,k.jsx)("img",{className:f,src:j.Z,alt:"",onClick:function(){return n()},onKeyDown:function(){return n()},role:"presentation"})})}),O?(0,k.jsx)("div",{className:"d-flex position-relative",style:{width:"100%",top:"30%"},children:(0,k.jsx)(_.default,{})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:S,children:[(0,k.jsx)("div",{className:"d-flex position-relative",children:(0,k.jsx)("p",{className:Z,children:"New Channel Group"})}),s.map((function(e){return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:N,hidden:"Organisation"===e.name&&m.Z.isOrganisationalAdmin(),children:[e.name," ",e.isRequired?(0,k.jsx)("span",{className:G,children:"*"}):void 0]}),(0,k.jsxs)("div",{children:["name"===e.parameterName&&(0,k.jsx)("input",{className:y,name:e.parameterName&&e.parameterName,type:e.type,placeholder:e.placeHolder,onChange:ve,maxLength:e.maxLength,onKeyDown:function(e){return e.target.maxLength<=e.target.value.length&&"Backspace"!==e.key&&e.preventDefault()}}),"number"===e.type&&(0,k.jsx)("input",{className:y,name:e.parameterName&&e.parameterName,type:e.type,placeholder:e.placeHolder,onChange:ve,maxLength:e.maxLength,onKeyDown:function(e){return("e"===e.key||"+"===e.key||"-"===e.key||"."===e.key)&&e.preventDefault()}}),"Organisation"===e.name&&!m.Z.isOrganisationalAdmin()&&(0,k.jsx)(R.Z,{label:"",text:T,list:ee,onSelect:Se,width:"100%",disabled:!1,withSearch:!0}),"status"===e.parameterName&&(0,k.jsx)(R.Z,{label:"",text:W,list:p,onSelect:je,width:"100%",disabled:!1}),Ie(e)&&(0,k.jsx)("span",{className:b,children:Fe(e)})]})]},e.id)}))]}),(0,k.jsxs)("div",{className:"position-absolute start-0 bottom-0 text-center",style:{width:"100%",height:"45px",marginBottom:"10px"},children:[(0,k.jsx)("i",{className:C,style:{pointerEvent:O&&"none"},"data-toggle":"tooltip","data-placement":"top",title:"Save new Channel Group",children:(0,k.jsx)("img",{src:F.Z,alt:"",onClick:Ge,onKeyDown:Ge,role:"presentation"})}),(0,k.jsx)("i",{className:v,"data-toggle":"tooltip","data-placement":"top",title:"Cancel",children:(0,k.jsx)("img",{src:I.Z,alt:"",onClick:function(){return n()},onKeyDown:function(){return n()},role:"presentation"})}),""!==V&&V]})]})]})}w.defaultProps={channelGroups:null};var V=w,X=t(6986),L=(t(8639),"EditDeleteChannelGroup_userInfo__WBbyx"),q="EditDeleteChannelGroup_deleteButton__ZzBJV",O="EditDeleteChannelGroup_cancelButton__R-kQJ",E="EditDeleteChannelGroup_divLoadingPanel__jVMHm";function B(e){var n=e.selectedChannelGroup,t=e.callbackClosePanel,o=e.callbackGetChannelGroups,s=e.channelGroups,l=d.editFormFields,u=d.checkString,p=d.maxRuns,w=d.statusList,V=(0,i.useState)(""),B=(0,r.Z)(V,2),A=B[0],H=B[1],P=(0,i.useState)(!1),K=(0,r.Z)(P,2),z=K[0],T=K[1],M=(0,i.useState)({name:"",organisationID:0,channelGroupId:0,maxRuns:!1,topX:!1,indicatorStatus:1}),J=(0,r.Z)(M,2),U=J[0],W=J[1],Q=(0,i.useState)("Select Organisation"),Y=(0,r.Z)(Q,2),$=Y[0],ee=Y[1],ne=(0,i.useState)("Select Status"),te=(0,r.Z)(ne,2),ae=te[0],re=te[1],ie=(0,i.useState)([]),oe=(0,r.Z)(ie,2),se=oe[0],le=oe[1],ue=(0,i.useState)({name:!1,organisation:!1,maxRuns:!1,topX:!1}),ce=(0,r.Z)(ue,2),pe=ce[0],me=ce[1],de=(0,i.useState)(""),he=(0,r.Z)(de,2),ge=he[0],xe=he[1],fe=(0,i.useState)(""),Ze=(0,r.Z)(fe,2),Ne=Ze[0],ye=Ze[1],Ce=(0,i.useState)(""),ve=(0,r.Z)(Ce,2),be=ve[0],Ge=ve[1],Se=(0,i.useState)(""),je=(0,r.Z)(Se,2),Fe=je[0],Ie=je[1],Re=(0,i.useState)({}),De=(0,r.Z)(Re,2),_e=De[0],ke=De[1],we=(0,i.useState)(!1),Ve=(0,r.Z)(we,2),Xe=Ve[0],Le=Ve[1],qe=(0,i.useState)(!1),Oe=(0,r.Z)(qe,2),Ee=Oe[0],Be=Oe[1],Ae=(0,i.useState)(!1),He=(0,r.Z)(Ae,2),Pe=He[0],Ke=He[1],ze=(0,i.useState)([]),Te=(0,r.Z)(ze,2),Me=Te[0],Je=Te[1],Ue=function(e){W((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,g.Z)({},e.target.name,e.target.value))}))},We=function(){var e,t,r=!0;return me({name:!1,organisation:!1,maxRuns:!1,topx:!1}),xe(""),ye(""),Ge(""),Ie(""),0===U.organisationID&&(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{organisation:!0})})),ye("Organisation is required")),u(U.name)?(e=U.name,t=U.organisationID,s.some((function(a){return a.channelGroupName.toLowerCase()===e.trim().toLowerCase()&&a.organisationID===t&&a.channelGroupId!==n.channelGroupId}))&&(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{name:!0})})),xe("Channel group name is used"))):(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{name:!0})})),xe("Channel group name is required")),u(U.maxRuns)?parseInt(U.maxRuns,10)>p?(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxRuns:!0})})),Ge("Maximum runs is ".concat(p))):parseInt(U.maxRuns,10)<1&&(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxRuns:!0})})),Ge("Minimum runs is 1")):(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxRuns:!0})})),Ge("Number of schedule runs is required")),u(U.topX)?parseInt(U.topX,10)<1?(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{topX:!0})})),Ie("Minimum top rated is 1")):u(U.maxRuns)&&parseInt(U.maxRuns,10)<parseInt(U.topX,10)&&(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{topX:!0})})),Ie("Cannot be more than the number of schedule runs")):(r=!1,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{topX:!0})})),Ie("Number of top rated schedules is required")),r},Qe=function(){if(H(""),T(!0),!z)if(We()){var e={name:U.name,organisationID:U.organisationID,channelGroupId:U.channelGroupId,maxRuns:U.maxRuns.toString(),topX:U.topX.toString(),indicatorStatus:U.indicatorStatus};c.updateChannelGroup(n.channelGroupId,e).then((function(){t(),o(),(0,D.Vp)("Channel group updated successfully")})).catch((function(e){var n=e.response.data.message;(0,D.h)(n)})).finally((function(){T(!1)}))}else(0,D.h)("Please check required fields"),T(!1)},Ye=function(e){ee(e.name),W((function(n){return(0,a.Z)((0,a.Z)({},n),{},{organisationID:e.id})}))},$e=function(e){re(e.name),W((function(n){return(0,a.Z)((0,a.Z)({},n),{},{indicatorStatus:e.id})}))},en=function(){c.getChannelGroup(n.channelGroupId).then((function(e){ee(e.data.organisationName),re(e.data.status),W({name:e.data.name,organisationID:e.data.organisationID,channelGroupId:n.channelGroupId,maxRuns:e.data.maxRuns,topX:e.data.topX,indicatorStatus:e.data.indicatorStatus}),ke({dateCreated:h.Z.toLocalFormat(e.data.dateCreated)}),Be(!1)}))};(0,i.useEffect)((function(){var e=m.Z.getUserIdentity().organisationId,n=m.Z.isOrganisationalAdmin();Be(!0),Be(!0),c.getOrganisations().then((function(e){var n=[],t=e.data.organisations,a=[];t.map((function(e){return a.push({id:e.id,name:e.name}),n.push(e.id),!0})),le(a),en()})),n&&W((0,a.Z)((0,a.Z)({},U),{},{organisationID:e}))}),[]),(0,i.useEffect)((function(){Be(!0),en()}),[n.channelGroupId]);var nn=function(e){return"name"===e.parameterName?ge:"organisationID"===e.parameterName?Ne:"maxRuns"===e.parameterName?be:"topX"===e.parameterName?Fe:""},tn=function(e){return"name"===e.parameterName?pe.name:"organisationID"===e.parameterName?pe.organisation:"maxRuns"===e.parameterName?pe.maxRuns:"topX"===e.parameterName&&pe.topX},an=function(e){return"maxRuns"===e.parameterName?U.maxRuns:"topX"===e.parameterName?U.topX:""};return(0,k.jsxs)("div",{className:x,style:{minWidth:"364px"},children:[(0,k.jsx)("div",{className:"position-relative",children:(0,k.jsx)("i",{children:(0,k.jsx)("img",{className:f,src:j.Z,alt:"",onClick:function(){return t()},onKeyDown:function(){return t()},role:"presentation"})})}),Ee?(0,k.jsx)("div",{className:"".concat(E),style:{fontSize:"28px"},children:(0,k.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:(0,k.jsx)("div",{children:(0,k.jsx)(_.default,{})})})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:S,children:[(0,k.jsx)("div",{className:"d-flex position-relative",children:(0,k.jsx)("p",{className:Z,children:"Edit Channel Group"})}),l.map((function(e){return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:N,hidden:"Organisation"===e.name&&m.Z.isOrganisationalAdmin(),children:[e.name," ",e.isRequired?(0,k.jsx)("span",{className:G,children:"*"}):void 0]}),(0,k.jsxs)("div",{children:["name"===e.parameterName&&(0,k.jsx)("input",{className:y,name:e.parameterName&&e.parameterName,type:e.type,placeholder:e.placeHolder,onChange:Ue,maxLength:e.maxLength,onKeyDown:function(e){return e.target.maxLength<=e.target.value.length&&"Backspace"!==e.key&&e.preventDefault()},value:U.name}),"number"===e.type&&(0,k.jsx)("input",{className:y,name:e.parameterName&&e.parameterName,type:e.type,placeholder:e.placeHolder,onChange:Ue,maxLength:e.maxLength,onKeyDown:function(e){return("e"===e.key||"+"===e.key||"-"===e.key||"."===e.key)&&e.preventDefault()},value:an(e)}),!m.Z.isOrganisationalAdmin()&&"organisationID"===e.parameterName&&(0,k.jsx)(R.Z,{label:"",text:$,list:se,onSelect:Ye,width:"100%",disabled:!0,withSearch:!0}),"status"===e.parameterName&&(0,k.jsx)(R.Z,{label:"",text:ae,list:w,onSelect:$e,width:"100%",disabled:!1}),tn(e)&&(0,k.jsx)("span",{className:b,children:nn(e)})]})]},e.id)})),(0,k.jsx)("button",{className:q,style:{marginTop:"15px",marginLeft:"0",width:"100%"},onClick:function(){c.getChannelsByGroup(U.channelGroupId).then((function(e){Je(e.data.channels),Ke(!0)}))},type:"button",children:"View Channels"}),(0,k.jsx)("div",{className:"".concat(L," d-flex"),children:(0,k.jsx)("div",{children:(0,k.jsxs)("p",{children:["Date Created ",(0,k.jsx)("br",{})," ",(0,k.jsx)("span",{children:_e.dateCreated})]})})})]}),(0,k.jsxs)("div",{className:"position-absolute start-0 bottom-0 text-center",style:{width:"100%",height:"45px",marginBottom:"10px"},children:[(0,k.jsx)("i",{className:C,style:{pointerEvent:Ee&&"none"},"data-toggle":"tooltip","data-placement":"top",title:"Update channel group",children:(0,k.jsx)("img",{src:F.Z,alt:"",onClick:Qe,onKeyDown:Qe,role:"presentation"})}),(0,k.jsx)("i",{className:v,children:(0,k.jsx)("img",{src:I.Z,alt:"",onClick:function(){return t()},onKeyDown:function(){return t()},role:"presentation","data-toggle":"tooltip","data-placement":"top",title:"Cancel"})}),""!==A&&A]})]}),(0,k.jsx)(X.Z,{size:"md",show:Xe,onHide:function(){return Le(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:(0,k.jsxs)(X.Z.Body,{style:{padding:"35px"},children:[(0,k.jsx)("div",{style:{textAlign:"center"},children:"You are permanently deleting this channel group"}),(0,k.jsx)("div",{style:{textAlign:"center",fontSize:"20px"},children:"Are you sure you want to proceed?"}),(0,k.jsxs)("div",{style:{textAlign:"center",paddingTop:"30px"},children:[(0,k.jsx)("button",{className:O,onClick:function(){return Le(!1)},type:"button",children:"Cancel"}),(0,k.jsx)("button",{className:q,onClick:function(){},type:"button",children:"Proceed"})]})]})}),(0,k.jsx)(X.Z,{size:"md",show:Pe,onHide:function(){return Ke(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:(0,k.jsxs)(X.Z.Body,{style:{padding:"35px"},children:[(0,k.jsx)("div",{style:{textAlign:"center"},children:(0,k.jsx)("h3",{style:{fontWeight:"bolder"},children:"Channels"})}),(0,k.jsx)("div",{style:{height:"500px",overflow:"auto",textAlign:"center",marginTop:"15px"},children:Me.map((function(e){return(0,k.jsx)("div",{children:e.channelName},e.id)}))}),(0,k.jsx)("div",{style:{textAlign:"center",paddingTop:"30px"},children:(0,k.jsx)("button",{className:O,onClick:function(){return Ke(!1)},style:{marginLeft:"0"},type:"button",children:"Close"})})]})})]})}B.defaultProps={selectedChannelGroup:null,channelGroups:null};var A=B;var H=function(){var e=m.Z.isOrganisationalAdmin(),n=(0,i.useState)(!1),t=(0,r.Z)(n,2),l=t[0],u=t[1],g=(0,i.useState)(!1),x=(0,r.Z)(g,2),f=x[0],Z=x[1],N=(0,i.useState)(),y=(0,r.Z)(N,2),C=y[0],v=y[1],b=(0,i.useState)([]),G=(0,r.Z)(b,2),S=G[0],j=G[1],F=(0,i.useState)([]),I=(0,r.Z)(F,2),R=I[0],D=I[1],_=(0,i.useState)({}),w=(0,r.Z)(_,2),X=w[0],L=w[1],q=(0,i.useState)({}),O=(0,r.Z)(q,2),E=O[0],B=O[1],H=(0,i.useState)({order:1,sort:2}),P=(0,r.Z)(H,2),K=P[0],z=P[1],T=(0,i.useState)({}),M=(0,r.Z)(T,2),J=M[0],U=M[1],W=(0,i.useState)(!1),Q=(0,r.Z)(W,2),Y=Q[0],$=Q[1],ee=function(e){var n="?pageNumber=".concat(e.pageNumber?e.pageNumber:1,"\n    &pageSize=").concat(e.pageSize?e.pageSize:50)+(e.sortOrder&&e.sortBy?"&sort=".concat(e.sortBy?e.sortBy:1,"\n        &sortBy=").concat(e.sortOrder?e.sortOrder:1):"")+(e.organisationFilter&&e.organisationFilterValue?"&organisationFilter=".concat(e.organisationFilter,"&organisationFilterValue=").concat(e.organisationFilterValue):"")+(e.groupFilter&&e.groupFilterValue?"&groupFilter=".concat(e.groupFilter,"&groupFilterValue=").concat(e.groupFilterValue):"")+(e.runsFilter&&e.runsFilterValue?"&runsFilter=".concat(e.runsFilter,"&runsFilterValue=").concat(e.runsFilterValue):"")+(e.topRatedFilter&&e.topRatedFilterValue?"&topRatedFilter=".concat(e.topRatedFilter,"&topRatedFilterValue=").concat(e.topRatedFilterValue):"")+(e.channelFilter&&e.channelFilterValue?"&channelFilter=".concat(e.channelFilter,"&channelFilterValue=").concat(e.channelFilterValue):"")+(e.statusFilter?"&statusFilter=".concat(e.statusFilter.map((function(e){return e.name})).join("-")):"")+(e.searchKey?"&searchKey=".concat(e.searchKey):"");return n.includes("+")&&(n=n.replace("+","%2B")),n},ne=function(){u(!0),c.getChannelGroups(ee(X)).then((function(n){j(function(n){var t=JSON.parse(JSON.stringify(n));return e?t.map((function(e){return{channelGroupId:e.channelGroupId,channelGroupName:e.channelGroupName,status:e.status,maxRuns:e.maxRuns,topX:e.topX,channels:e.channels}})):t.map((function(e){return{channelGroupId:e.channelGroupId,organisationName:e.organisationName,channelGroupName:e.channelGroupName,status:e.status,maxRuns:e.maxRuns,topX:e.topX,channels:e.channels}}))}(n.data.channelGroups)),U({totalCount:n.data.totalCount,pageSize:n.data.pageSize,currentPage:n.data.currentPage,totalPages:n.data.totalPages})})).finally((function(){return u(!1)}))};return(0,i.useEffect)((function(){!function(){var n=d.tableHeaders;e&&(n=n.filter((function(e){return 1!==e.headerId}))),D(n)}()}),[]),(0,i.useEffect)((function(){var e;B({organisationFilter:(e=X).organisationFilter,organisationFilterValue:e.organisationFilterValue,groupFilter:e.groupFilter,groupFilterValue:e.groupFilterValue,statusFilter:e.statusFilter,runsFilter:e.runsFilter,runsFilterValue:e.runsFilterValue,topRatedFilter:e.topRatedFilter,topRatedFilterValue:e.topRatedFilterValue,channelFilter:e.channelFilter,channelFilterValue:e.channelFilterValue}),ne()}),[X]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.Z,{componentName:"Channel Groups",addButtonText:"New Channel Group",isAddButtonHidden:!1,handleSearch:function(e){L((0,a.Z)((0,a.Z)({},X),{},{searchKey:e,pageNumber:1}))},callbackAddButtonFunction:function(){$(!0),v()}}),(0,k.jsx)("hr",{style:{borderTop:"1px  solid #b1b1b1",marginBottom:"8px"}}),(0,k.jsxs)("div",{className:"d-flex",children:[(0,k.jsx)(s.Z,{noDataVerbiage:"No channels found",list:S,headers:R,queryParameters:E,paginationParameters:J,sortParameters:K,isFetchingData:l,isExporting:f,onFilter:function(e){L((0,a.Z)((0,a.Z)((0,a.Z)({},X),e),{},{pageNumber:1}))},onClearFilters:function(){L({pageNumber:1,pageSize:X.pageSize,searchKey:X.searchKey})},onSort:function(e){var n=e.sortBy,t=e.sortOrder;z({order:t,sort:n}),L((0,a.Z)((0,a.Z)({},X),{},{sortBy:n,sortOrder:t}))},onPaginate:function(e,n){L((0,a.Z)((0,a.Z)({},X),{},{pageNumber:e,pageSize:n}))},onExport:function(){if(!f){var e=m.Z.getUserIdentity().organisationName;Z(!0),c.exportChannelGroups(ee(X)).then((function(n){var t=new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,o.saveAs)(t,"".concat(e?"".concat(e.toLowerCase(),"_"):"","op2mise_channel_groups_data_export_").concat(h.Z.toExportFormat(new Date),".xlsx"))})).finally((function(){Z(!1)}))}},onDoubleClickSelectData:function(e){v(e),$(!1)}}),Y&&(0,k.jsx)(V,{callbackClosePanel:function(){$(!1)},callbackGetChannelGroups:ne,channelGroups:S}),C&&(0,k.jsx)(A,{selectedChannelGroup:C,callbackClosePanel:function(){v()},callbackGetChannelGroups:ne,channelGroups:S})]})]})}}}]);
//# sourceMappingURL=439.1e6106c8.chunk.js.map