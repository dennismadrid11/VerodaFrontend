"use strict";(self.webpackChunksky=self.webpackChunksky||[]).push([[405],{6275:function(e,s,a){var t=a(2791),n=a(2632),r=a(184);function o(e){var s=e.imageSource,a=e.callbackChangeImage,o=e.styles,i=(0,t.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{children:(0,r.jsx)("img",{className:o.userPhoto,src:s,alt:""})}),(0,r.jsx)("button",{className:o.uploadPhotoButton,onClick:function(){i.current.click()},type:"button","aria-label":"upload photo"}),(0,r.jsx)("input",{type:"file",style:{display:"none"},ref:i,onChange:function(e){var s="".file,t=(s=e.target.files[0]).name.split(".").pop();"tif"===t||"pjp"===t||"xbm"===t||"jxl"===t||"svgz"===t||"jpg"===t||"jpeg"===t||"ico"===t||"tiff"===t||"gif"===t||"svg"===t||"jfif"===t||"webp"===t||"png"===t||"bmp"===t||"pjep"===t||"avif"===t?function(e){return new Promise((function(s){var a="",t=new FileReader;t.readAsDataURL(e),t.onload=function(){a=t.result,s(a)}}))}(s).then((function(e){s.base64=e,a(e,t,s.size)})).catch((function(e){(0,n.h)(e)})):(0,n.h)("Uploaded file type is not supported. Please use files in image format (jpg, png)")}})]})}o.defaultProps={imageSource:null},s.Z=o},1715:function(e,s,a){var t=a(4569),n=a.n(t),r={getUser:function(e){var s="".concat("https://localhost:44357/api/","user/").concat(e);return n().get(s)},updateUser:function(e,s){var a="".concat("https://localhost:44357/api/","user/").concat(e);return n().put(a,s)},changePassword:function(e,s){var a="".concat("https://localhost:44357/api/","user/changepassword/").concat(e);return n().patch(a,s)}};s.Z=r},9405:function(e,s,a){a.r(s),a.d(s,{default:function(){return P}});var t=a(4942),n=a(1413),r=a(885),o=a(2791),i=a(1467),l={header:"UserProfile_header__FD78M",headerText:"UserProfile_headerText__v5sWA",profilePanel:"UserProfile_profilePanel__rqMey",changePasswordPanel:"UserProfile_changePasswordPanel__dFlFs",profilePhoto:"UserProfile_profilePhoto__-w6Qx",uploadPhotoButton:"UserProfile_uploadPhotoButton__h01m8",inputForm:"UserProfile_inputForm__1Ftxd",inputLabel:"UserProfile_inputLabel__5GlDM",inputField:"UserProfile_inputField__8Tlgb",passwordInputField:"UserProfile_passwordInputField__KoSA2",eyeIcon:"UserProfile_eyeIcon__SNUdF",updateButton:"UserProfile_updateButton__2wiep",resetButton:"UserProfile_resetButton__Ha3mK",changePasswordPanelTitle:"UserProfile_changePasswordPanelTitle__taQPC",successAlert:"UserProfile_successAlert__m-hrF",alertSuccessText:"UserProfile_alertSuccessText__0gEq6",alertErrorText:"UserProfile_alertErrorText__3nDh3",profilePanelFooter:"UserProfile_profilePanelFooter__yCbnB",changePasswordPanelFooter:"UserProfile_changePasswordPanelFooter__pzo4M",alertText:"UserProfile_alertText__FgViK",userPhoto:"UserProfile_userPhoto__KaKje"},d=a(9938),c=a(5339),u=a(608),p=a(6275),m=a(1715),h=a(392),f=a(2632),w=a(184);var P=function(e){var s=e.setIsProfileUpdated,a=(0,o.useState)({firstName:"",lastName:"",email:"",jobTitle:"",base64ProfileImage:"",fileExtension:"",roleID:3}),P=(0,r.Z)(a,2),x=P[0],g=P[1],j=(0,o.useState)({oldPassword:"",newPassword:""}),v=(0,r.Z)(j,2),N=v[0],_=v[1],y=(0,o.useState)(""),b=(0,r.Z)(y,2),Z=b[0],F=b[1],U=(0,o.useState)({oldPassword:"password",newPassword:"password",confirmPassword:"password"}),I=(0,r.Z)(U,2),C=I[0],S=I[1],T=(0,o.useState)(d),E=(0,r.Z)(T,2),k=E[0],L=E[1],B=(0,o.useState)(0),D=(0,r.Z)(B,2),A=D[0],K=D[1],O=(0,o.useState)(),R=(0,r.Z)(O,2),q=R[0],z=R[1],M=(0,o.useState)(""),V=(0,r.Z)(M,2),W=(V[0],V[1],(0,o.useState)(!1)),Q=(0,r.Z)(W,2),$=Q[0],G=Q[1],H=(0,o.useState)(""),J=(0,r.Z)(H,2),X=J[0],Y=J[1],ee=(0,o.useState)(""),se=(0,r.Z)(ee,2),ae=se[0],te=se[1],ne=(0,o.useState)(""),re=(0,r.Z)(ne,2),oe=re[0],ie=re[1],le=(0,o.useState)(!1),de=(0,r.Z)(le,2),ce=de[0],ue=de[1],pe=(0,o.useState)(!1),me=(0,r.Z)(pe,2),he=me[0],fe=me[1],we=(0,o.useState)(!1),Pe=(0,r.Z)(we,2),xe=Pe[0],ge=Pe[1],je=(0,o.useState)(""),ve=(0,r.Z)(je,2),Ne=ve[0],_e=ve[1],ye=function(e){S((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,t.Z)({},e,"password"===C[e]?"text":"password"))}))},be=function(e){switch(e){case"Super Admin":return 1;case"Organisation Admin":return 2;case"Organisation User":return 3}return 0},Ze=function(e){g((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,t.Z)({},e.target.name,e.target.value))}))},Fe=function(e){_((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,t.Z)({},e.target.name,e.target.value))}))};return(0,o.useEffect)((function(){m.Z.getUser(h.Z.getUserIdentity().userId).then((function(e){g({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,jobTitle:e.data.jobTitle,roleId:be(e.data.role),base64ProfileImage:e.data.profilePic,organisationID:e.data.organisationID,fileExtension:""}),L(null!==e.data.profilePic&&""!==e.data.profilePic?e.data.profilePic:d)}))}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:l.header,children:(0,w.jsx)("div",{children:(0,w.jsx)("b",{className:l.headerText,children:"Profile"})})}),(0,w.jsx)("hr",{style:{border:"1px inset #B1B1B1",marginBottom:"8px"}}),(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-12 col-md-6",style:{paddingRight:"5px"},children:(0,w.jsxs)("div",{className:l.profilePanel,children:[(0,w.jsx)("div",{style:{width:"100%",position:"relative"},children:(0,w.jsx)("div",{style:{width:"110px",height:"110px",right:"0",left:"0",margin:"auto",position:"relative"},children:(0,w.jsx)(p.Z,{imageSource:k,callbackChangeImage:function(e,s,a){var t="svg"===s?"svg+xml":s;g((function(a){return(0,n.Z)((0,n.Z)({},a),{},{base64ProfileImage:"data:image/".concat(t,";base64,").concat(e.split(",")[1]),fileExtension:s})})),L(e),K(a/1048576..toFixed(2))},styles:l})})}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsxs)("div",{className:l.inputLabel,children:["First Name ",(0,w.jsx)("span",{children:"*"})]}),(0,w.jsx)("input",{className:l.inputField,type:"text",name:"firstName",maxLength:"50",autoComplete:"off",value:x.firstName,onChange:Ze})]}),ce&&(0,w.jsx)("span",{className:l.alertErrorText,children:"First name is required"}),(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsxs)("div",{className:l.inputLabel,children:["Last Name ",(0,w.jsx)("span",{children:"*"})]}),(0,w.jsx)("input",{className:l.inputField,type:"text",name:"lastName",maxLength:"50",autoComplete:"off",value:x.lastName,onChange:Ze})]}),he&&(0,w.jsx)("span",{className:l.alertErrorText,children:"Last name is required"}),(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsxs)("div",{className:l.inputLabel,children:["Email ",(0,w.jsx)("span",{children:"*"})]}),(0,w.jsx)("input",{className:l.inputField,type:"text",name:"email",maxLength:"60",autoComplete:"off",value:x.email,onChange:Ze})]}),xe&&(0,w.jsx)("span",{className:l.alertErrorText,children:Ne}),(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsx)("div",{className:l.inputLabel,children:"Job Title"}),(0,w.jsx)("input",{className:l.inputField,type:"text",name:"jobTitle",maxLength:"100",autoComplete:"off",value:x.jobTitle,onChange:Ze})]})]}),(0,w.jsx)("div",{className:l.successAlert,style:{display:$?"block":"none"},children:"User details successfully updated."}),(0,w.jsx)("div",{className:l.alertErrorText,style:{display:oe.length>0?"block":"none"},children:oe}),(0,w.jsx)("div",{className:l.profilePanelFooter,children:(0,w.jsx)("button",{className:l.updateButton,onClick:function(){x.firstName&&x.lastName&&x.email&&A<=2?(ge(!1),ue(!1),fe(!1),m.Z.updateUser(h.Z.getUserIdentity().userId,x).then((function(){(0,f.Vp)("User details successfully updated"),s(!0)})).catch((function(e){e.response.data.message==="Email address ".concat(x.email," is already registered in the system")&&(ge(!0),_e("Email address ".concat(x.email," is already used"))),"Email is invalid"===e.response.data.message&&(ge(!0),_e("Invalid email address"))})),setTimeout((function(){G(!1)}),2e3)):(""===x.email?(ge(!0),_e("Email is required")):(ge(!1),_e("")),""===x.firstName?ue(!0):ue(!1),""===x.lastName?fe(!0):fe(!1),ie(A>2?"Image file size exceeds to 2mb":""))},type:"button",children:"Update"})})]})}),(0,w.jsx)("div",{className:"col-12 col-md-6",style:{paddingLeft:"5px"},children:(0,w.jsxs)("div",{className:l.changePasswordPanel,children:[(0,w.jsx)("div",{children:(0,w.jsx)("p",{className:l.changePasswordPanelTitle,children:"Password Reset"})}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsx)("div",{className:l.inputLabel,children:"Old Password"}),(0,w.jsxs)("div",{className:"input-group position-relative",children:[(0,w.jsx)("input",{className:l.passwordInputField,type:C.oldPassword,name:"oldPassword",value:N.oldPassword,onChange:Fe}),(0,w.jsx)("div",{className:"".concat(l.eyeIcon," input-group-append"),children:"password"===C.oldPassword?(0,w.jsx)("img",{style:{cursor:"pointer"},src:c,alt:"EyeIcon",onClick:function(){return ye("oldPassword")},onKeyDown:function(){return ye("oldPassword")},role:"presentation"}):(0,w.jsx)("img",{style:{cursor:"pointer",height:"12.03px",width:"15.03px"},src:u,alt:"EyeOnIcon",onClick:function(){return ye("oldPassword")},onKeyDown:function(){return ye("oldPassword")},role:"presentation"})})]})]}),(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsx)("div",{className:l.inputLabel,children:"New Password"}),(0,w.jsxs)("div",{className:"input-group position-relative",children:[(0,w.jsx)("input",{className:l.passwordInputField,type:C.newPassword,name:"newPassword",value:N.newPassword,onChange:Fe}),(0,w.jsx)("div",{className:"".concat(l.eyeIcon," input-group-append"),children:"password"===C.newPassword?(0,w.jsx)("img",{style:{cursor:"pointer"},src:c,alt:"EyeIcon",onClick:function(){return ye("newPassword")},onKeyDown:function(){return ye("newPassword")},role:"presentation"}):(0,w.jsx)("img",{style:{cursor:"pointer",height:"12.03px",width:"15.03px"},src:u,alt:"EyeOnIcon",onClick:function(){return ye("newPassword")},onKeyDown:function(){return ye("newPassword")},role:"presentation"})})]})]}),(0,w.jsx)("div",{className:"",children:(0,w.jsx)(i.Z,{className:"".concat(1===q&&"password-reset-password-meter-strength-1"," ").concat(2===q&&"password-reset-password-meter-strength-2"," ").concat(3===q&&"password-reset-password-meter-strength-3"," ").concat(4===q&&"password-reset-password-meter-strength-4"),password:N.newPassword,barColors:["#ddd","#ff5571","#ffd083","#2178f1","#00d583"],scoreWords:[],shortScoreWord:"",onChangeScore:function(){0===N.newPassword.length&&z(),N.newPassword.length>=8&&z(1),N.newPassword.length>=8&&/\d/.test(N.newPassword)&&z(2),N.newPassword.length>=8&&/\d/.test(N.newPassword)&&/[A-Z]/.test(N.newPassword)&&z(3),N.newPassword.length>=8&&/\d/.test(N.newPassword)&&/[A-Z]/.test(N.newPassword)&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[-!@#$%^&*()_+={}[\]:;<>,.?~/\\`|'"]).{8,}$/.test(N.newPassword)&&z(4)}})}),(0,w.jsxs)("div",{className:l.inputForm,children:[(0,w.jsx)("div",{className:l.inputLabel,children:"Confirm Password"}),(0,w.jsxs)("div",{className:"input-group position-relative",children:[(0,w.jsx)("input",{className:l.passwordInputField,type:C.confirmPassword,value:Z,onChange:function(e){F(e.target.value)}}),(0,w.jsx)("div",{className:"".concat(l.eyeIcon," input-group-append"),children:"password"===C.confirmPassword?(0,w.jsx)("img",{style:{cursor:"pointer"},src:c,alt:"EyeIcon",onClick:function(){return ye("confirmPassword")},onKeyDown:function(){return ye("confirmPassword")},role:"presentation"}):(0,w.jsx)("img",{style:{cursor:"pointer",height:"12.03px",width:"15.03px"},src:u,alt:"EyeOnIcon",onClick:function(){return ye("confirmPassword")},onKeyDown:function(){return ye("confirmPassword")},role:"presentation"})})]})]}),(0,w.jsx)("span",{className:l.alertText,children:X}),(0,w.jsx)("span",{className:l.alertSuccessText,children:ae})]}),(0,w.jsx)("div",{className:l.changePasswordPanelFooter,children:(0,w.jsx)("button",{className:l.resetButton,onClick:function(){Z===N.newPassword&&4===q?m.Z.changePassword(h.Z.getUserIdentity().userId,N).then((function(){_({oldPassword:"",newPassword:""}),F(""),(0,f.Vp)("Password successfully changed"),Y("")})).catch((function(e){Y(e.response.data.message),te("")})):Z!==N.newPassword?Y("New password and Confirm new password does not match"):Y("Password needs to contain at least 8 characters in length including at least 1 number, 1 special character, 1 uppercase letter and 1 lowercase letter")},disabled:""===N.oldPassword||""===N.newPassword||""===Z,type:"button",children:"Reset"})})]})})]})]})}}}]);
//# sourceMappingURL=405.3c36f810.chunk.js.map