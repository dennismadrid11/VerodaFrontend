"use strict";(self.webpackChunksky=self.webpackChunksky||[]).push([[794],{2894:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n=a(1413),r=a(885),i=a(2791),o=a(4802),l=a(392),s=a(2677),c=a(8782),u=a(6033),m=a(4942),d="Channel_box__OIov-",h="Channel_closeIcon__kM3Xn",p="Channel_headerText__K9bRY",f="Channel_formLabel__7bxVX",g="Channel_formInput__MWilR",Z="Channel_saveIcon__gnFwJ",N="Channel_closeCircleIcon__dmEPn",x="Channel_hasError__GcQvx",y="Channel_required__7221z",v="Channel_formWrapper__wWNm1",S=a(4065),C=a(5142),I=a(3234),F=a(4895),j=a(7457),D={tableHeaders:[{headerId:1,headerName:"Organisation",filter:{type:1,queryNames:["organisationFilter","organisationFilterValue"]},sortable:!0},{headerId:2,headerName:"Channel",filter:{type:1,queryNames:["channelFilter","channelFilterValue"]},sortable:!0},{headerId:6,headerName:"Status",filter:{type:4,queryNames:["statusFilter"],list:[{id:1,name:"Active"},{id:2,name:"Inactive"}]},sortable:!0},{headerId:7,headerName:"Time Zone",filter:{type:1,queryNames:["timeZoneFilter","timeZoneFilterValue"]},sortable:!0},{headerId:3,headerName:"Group",filter:{type:1,queryNames:["groupFilter","groupFilterValue"]},sortable:!0},{headerId:4,headerName:"Runs",filter:{type:5,queryNames:["runsFilter","runsFilterValue"]},sortable:!0},{headerId:5,headerName:"Top Rated",filter:{type:5,queryNames:["topRatedFilter","topRatedFilterValue"]},sortable:!0}],formFields:[{name:"Organisation",parameterName:"organisationID",type:"text",placeHolder:"Enter the organisation name",isRequired:!0,maxLength:99},{name:"Channel Group",parameterName:"channelGroup",type:"text",placeHolder:"Enter the Channel Group Name",isRequired:!0,maxLength:99},{name:"Time Zone",parameterName:"timeZone",type:"text",placeHolder:"Enter the TimeZone",isRequired:!0,maxLength:99},{name:"Status",parameterName:"status",type:"text",placeHolder:"Enter the Status",isRequired:!0,maxLength:99},{name:"Channel Name",parameterName:"channelName",type:"text",placeHolder:"Enter the channel name",isRequired:!0,maxLength:99},{name:"Channel Code",parameterName:"code",type:"text",placeHolder:"Enter the channel code",isRequired:!0,maxLength:100},{name:"Start of Day",parameterName:"dayHourStart",type:"text",placeHolder:"Enter the day hour start from 1 - 24",isRequired:!0,maxLength:24},{name:"System Name",parameterName:"systemName",type:"text",placeHolder:"Enter the system name for this channel",isRequired:!1,maxLength:100},{name:"Frame Rate",parameterName:"frameRate",type:"text",placeHolder:"Enter the frame rate for this channel",isRequired:!1,maxLength:99},{name:"Profile Time Interval",parameterName:"timeInterval",type:"text",placeHolder:"Enter the profile time interval",isRequired:!0,maxLength:99}],editFormFields:[{name:"Organisation",parameterName:"organisationID",type:"text",placeHolder:"Enter the organisation name",isRequired:!0,maxLength:99},{name:"Channel Group",parameterName:"channelGroup",type:"text",placeHolder:"Enter the Channel Group Name",isRequired:!0,maxLength:99},{name:"Time Zone",parameterName:"timeZone",type:"text",placeHolder:"Enter the TimeZone",isRequired:!0,maxLength:99},{name:"Status",parameterName:"status",type:"text",placeHolder:"Enter the Status",isRequired:!0,maxLength:99},{name:"Channel Name",parameterName:"channelName",type:"text",placeHolder:"Enter the channel name",isRequired:!0,maxLength:99},{name:"Channel Code",parameterName:"code",type:"text",placeHolder:"Enter the channel code",isRequired:!0,maxLength:100},{name:"Start of Day",parameterName:"dayHourStart",type:"text",placeHolder:"Enter the day hour start from 1 - 24",isRequired:!0,maxLength:24},{name:"System Name",parameterName:"systemName",type:"text",placeHolder:"Enter the system name for this channel",isRequired:!1,maxLength:100},{name:"Frame Rate",parameterName:"frameRate",type:"text",placeHolder:"Enter the frame rate for this channel",isRequired:!1,maxLength:99},{name:"Profile Time Interval",parameterName:"timeInterval",type:"text",placeHolder:"Enter the profile time interval",isRequired:!0,maxLength:99}],statusList:[{id:"1",name:"Active"},{id:"2",name:"Inactive"}],checkString:function(e){return""!==e&&null!==e&&void 0!==e},timeIntervals:[{id:1,value:1},{id:2,value:2},{id:3,value:3},{id:4,value:4},{id:5,value:6},{id:6,value:8},{id:7,value:12},{id:8,value:24}]},b=a(9639),H=a(2632),_=a(8557),w={getNumbersOnly:function(e){return e.split("").filter((function(e){return!isNaN(e)&&!isNaN(parseFloat(e))||":"===e})).join("")}},G=a(184);function R(e){var t=e.callbackClosePanel,a=e.callbackGetChannels,o=e.channels,s=D.formFields,c=D.checkString,u=D.statusList,R=(0,i.useState)(""),k=(0,r.Z)(R,2),V=k[0],L=k[1],E=(0,i.useState)(!1),q=(0,r.Z)(E,2),A=q[0],O=q[1],B=(0,i.useState)({channelName:"",organisationID:0,channelGroupID:0,indicatorStatus:1,timeZoneID:0,timeInterval:1,code:"",systemName:"",dayHourStart:"",frameRate:""}),T=(0,r.Z)(B,2),P=T[0],z=T[1],K=(0,i.useState)("Select Organisation"),M=(0,r.Z)(K,2),U=M[0],X=M[1],W=(0,i.useState)([]),Q=(0,r.Z)(W,2),J=Q[0],Y=Q[1],$=(0,i.useState)("Select Channel Group"),ee=(0,r.Z)($,2),te=ee[0],ae=ee[1],ne=(0,i.useState)(D.timeIntervals[0]),re=(0,r.Z)(ne,2),ie=re[0],oe=re[1],le=(0,i.useState)("Active"),se=(0,r.Z)(le,2),ce=se[0],ue=se[1],me=(0,i.useState)([]),de=(0,r.Z)(me,2),he=de[0],pe=de[1],fe=(0,i.useState)("Select TimeZone"),ge=(0,r.Z)(fe,2),Ze=ge[0],Ne=ge[1],xe=(0,i.useState)([]),ye=(0,r.Z)(xe,2),ve=ye[0],Se=ye[1],Ce=(0,i.useState)({channelName:!1,organisation:!1,channelGroup:!1,timeZone:!1,code:!1,dayHourStart:!1}),Ie=(0,r.Z)(Ce,2),Fe=Ie[0],je=Ie[1],De=(0,i.useState)(""),be=(0,r.Z)(De,2),He=be[0],_e=be[1],we=(0,i.useState)(""),Ge=(0,r.Z)(we,2),Re=Ge[0],ke=Ge[1],Ve=(0,i.useState)(""),Le=(0,r.Z)(Ve,2),Ee=Le[0],qe=Le[1],Ae=(0,i.useState)(""),Oe=(0,r.Z)(Ae,2),Be=Oe[0],Te=Oe[1],Pe=(0,i.useState)(""),ze=(0,r.Z)(Pe,2),Ke=ze[0],Me=ze[1],Ue=(0,i.useState)(""),Xe=(0,r.Z)(Ue,2),We=Xe[0],Qe=Xe[1],Je=function(e,t){return e="0"===(e=""===(e=w.getNumbersOnly(e))?"":String(Math.min(parseInt(e,10),t)))?"":e};function Ye(e){var t=e.toString();return 1===t.length?"0"+t:t}function $e(e){var t=e.split(":"),a=(0,r.Z)(t,2),n=a[0],i=a[1];return"".concat(n,":").concat(i,":00")}var et=function(e){var t=e.target.value;"frameRate"===e.target.name&&(t=Je(t,99)),"dayHourStart"===e.target.name&&(t=Je(t,24)),z((function(a){return(0,n.Z)((0,n.Z)({},a),{},(0,m.Z)({},e.target.name,t))}))},tt=function(){var e,t,a=!0;return je({channelName:!1,organisation:!1,channelGroup:!1,timeZone:!1,code:!1,dayHourStart:!1}),_e(""),ke(""),qe(""),Te(""),Me(""),Qe(""),0===P.organisationID&&(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{organisation:!0})})),ke("Organisation is required")),0===P.channelGroupID&&(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{channelGroup:!0})})),qe("Channel group is required")),c(P.channelName)?0!==P.organisationID&&(e=P.channelName,t=P.organisationID,o.some((function(a){return a.channelName.toLowerCase()===e.trim().toLowerCase()&&a.organisationID===t}))&&(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{channelName:!0})})),_e("Channel name is used"))):(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{channelName:!0})})),_e("Channel name is required")),0===P.timeZoneID&&(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{timeZone:!0})})),Te("Timezone is required")),c(P.dayHourStart)||(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{dayHourStart:!0})})),Qe("Start of day is required")),c(P.code)?0!==P.organisationID&&function(e,t){return o.some((function(a){return null!==a.code&&a.code.toLowerCase()===e.trim().toLowerCase()&&a.organisationID===t}))}(P.code,P.organisationID)&&(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{code:!0})})),Me("Channel code is used")):(a=!1,je((function(e){return(0,n.Z)((0,n.Z)({},e),{},{code:!0})})),Me("Channel code is required")),a},at=function(){var e;L(""),O(!0),A||(tt()?(e=P.dayHourStart,parseInt(e),j.Z.addChannel(P).then((function(){t(),a(),(0,H.Vp)("Channel created successfully")})).catch((function(e){var t=e.response.data.message;(0,H.h)(t)})).finally((function(){O(!1)}))):(O(!1),(0,H.h)("Please check required fields")))},nt=function(e){j.Z.getChannelGroups(e).then((function(e){var t=e.data.channelGroups,a=[];t.map((function(e){return a.push({id:e.channelGroupId,name:e.channelGroupName}),!0})),pe(a)}))},rt=function(e){X(e.name),z((function(t){return(0,n.Z)((0,n.Z)({},t),{},{organisationID:e.id})})),ae("Select Channel Group");var t="?organisationFilter=1&organisationFilterValue=".concat(e.id);nt(t)},it=function(e){ue(e.name),z((function(t){return(0,n.Z)((0,n.Z)({},t),{},{indicatorStatus:e.id})}))},ot=function(e){ae(e.name),z((function(t){return(0,n.Z)((0,n.Z)({},t),{},{channelGroupID:e.id})}))},lt=function(e){oe(e),z((0,n.Z)((0,n.Z)({},P),{},{timeInterval:e.value}))},st=function(e){Ne(e.name),z((function(t){return(0,n.Z)((0,n.Z)({},t),{},{timeZoneID:e.id})}))};(0,i.useEffect)((function(){if(X("Select Organisation"),ae("Select Channel Group"),O(!0),j.Z.getOrganisations().then((function(e){var t=[],a=e.data.organisations,n=[];a.map((function(e){return n.push({id:e.id,name:e.name}),t.push(e.id),!0})),Y(n),O(!1)})),O(!0),j.Z.getTimezoneLookup().then((function(e){var t=e.data;Se(t);var a=t.filter((function(e){return"(UTC+00:00) Dublin, Edinburgh, Lisbon, London"===e.name}))[0];Ne(a.name),z((function(e){return(0,n.Z)((0,n.Z)({},e),{},{timeZoneID:a.id})})),O(!1)})),l.Z.isOrganisationalAdmin()){var e={organisationFilter:l.Z.getUserIdentity().organisationId,organisationFilterValue:l.Z.getUserIdentity().organisationName},t="?organisationFilter=".concat(e.organisationFilter,"&organisationFilterValue=").concat(e.organisationFilterValue);nt(t),z((0,n.Z)((0,n.Z)({},P),{},{organisationID:e.organisationFilter}))}}),[]);var ct=function(e){return"channelName"===e.parameterName?He:"organisationID"===e.parameterName?Re:"channelGroup"===e.parameterName?Ee:"timeZone"===e.parameterName?Be:"code"===e.parameterName?Ke:"dayHourStart"===e.parameterName?We:""},ut=function(e){return"channelName"===e.parameterName?Fe.channelName:"organisationID"===e.parameterName?Fe.organisation:"channelGroup"===e.parameterName?Fe.channelGroup:"timeZone"===e.parameterName?Fe.timeZone:"code"===e.parameterName?Fe.code:"dayHourStart"===e.parameterName&&Fe.dayHourStart};return(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("div",{className:"position-relative",children:(0,G.jsx)("i",{children:(0,G.jsx)("img",{className:h,src:S.Z,alt:"",onClick:function(){return t()},onKeyDown:function(){return t()},role:"presentation"})})}),A?(0,G.jsx)("div",{className:"d-flex position-relative",style:{width:"100%",top:"30%"},children:(0,G.jsx)(_.default,{})}):(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:v,children:[(0,G.jsx)("div",{className:"d-flex position-relative",children:(0,G.jsx)("p",{className:p,children:"New Channel"})}),s.map((function(e){return(0,G.jsxs)("div",{children:[(0,G.jsxs)("div",{className:f,hidden:"Organisation"===e.name&&l.Z.isOrganisationalAdmin(),children:[e.name," ",e.isRequired?(0,G.jsx)("span",{className:y,children:"*"}):void 0]}),("channelName"===e.parameterName||"code"===e.parameterName||"systemName"===e.parameterName||"frameRate"===e.parameterName)&&(0,G.jsx)("input",{className:g,name:e.parameterName&&e.parameterName,type:e.type,placeholder:e.placeHolder,value:P[e.parameterName],onChange:et,maxLength:e.maxLength,onKeyDown:function(e){return e.target.maxLength<=e.target.value.length&&"Backspace"!==e.key&&e.preventDefault()}}),"dayHourStart"===e.parameterName&&(0,G.jsx)(F.Z,{onChange:function(e){return function(e){if(e){var t=e,a=t.getHours(),r=Ye(t.getMinutes()),i=Ye(a)+":"+r;z((function(e){return(0,n.Z)((0,n.Z)({},e),{},{dayHourStart:$e(i)})}))}else z((function(t){return(0,n.Z)((0,n.Z)({},t),{},{dayHourStart:e})}))}(e)}}),"channelGroup"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:te,list:he,onSelect:ot,width:"100%",disabled:!1,withSearch:!0}),"timeInterval"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:"".concat(ie.value," Hour").concat(ie.value>1?"s":""),list:D.timeIntervals,height:"149px",onSelect:lt,width:"100%"}),"organisationID"===e.parameterName&&!l.Z.isOrganisationalAdmin()&&(0,G.jsx)(b.Z,{label:"",text:U,list:J,onSelect:rt,width:"100%",disabled:!1,withSearch:!0}),"timeZone"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:Ze,list:ve,onSelect:st,width:"100%",disabled:!1,withSearch:!0}),"status"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:ce,list:u,onSelect:it,width:"100%",disabled:!1}),ut(e)&&(0,G.jsx)("span",{className:x,children:ct(e)})]},e.id)})),(0,G.jsxs)("div",{className:"position-absolute start-0 bottom-0 text-center",style:{width:"100%",marginBottom:"21px"},children:[(0,G.jsx)("i",{className:Z,style:{pointerEvent:A&&"none"},"data-toggle":"tooltip","data-placement":"top",title:"Save new Channel",children:(0,G.jsx)("img",{src:C.Z,alt:"",onClick:at,onKeyDown:at,role:"presentation"})}),(0,G.jsx)("i",{className:N,"data-toggle":"tooltip","data-placement":"top",title:"Cancel",children:(0,G.jsx)("img",{src:I.Z,alt:"",onClick:function(){return t()},onKeyDown:function(){return t()},role:"presentation"})}),""!==V&&V]})]})})]})}R.defaultProps={channels:null};var k=R,V=a(6986),L=(a(8639),"EditDeleteChannel_userInfo__+f5MT"),E="EditDeleteChannel_deleteButton__P-aSn",q="EditDeleteChannel_cancelButton__l0SKs",A="EditDeleteChannel_divLoadingPanel__GkKUy",O=a(1746);function B(e){var t=e.selectedChannel,a=e.callbackClosePanel,o=e.callbackGetChannels,c=e.channels,u=D.editFormFields,R=D.checkString,k=D.statusList,B=(0,i.useState)(""),T=(0,r.Z)(B,2),P=T[0],z=T[1],K=(0,i.useState)(!1),M=(0,r.Z)(K,2),U=M[0],X=M[1],W=(0,i.useState)({channelName:"",systemName:"",frameRate:"",organisationID:0,channelId:0,channelGroupID:!1,indicatorStatus:1,timeZoneID:0,code:"",dayHourStart:""}),Q=(0,r.Z)(W,2),J=Q[0],Y=Q[1],$=(0,i.useState)("Select Organisation"),ee=(0,r.Z)($,2),te=ee[0],ae=ee[1],ne=[],re=(0,i.useState)("Select Channel Group"),ie=(0,r.Z)(re,2),oe=ie[0],le=ie[1],se=(0,i.useState)(D.timeIntervals[0]),ce=(0,r.Z)(se,2),ue=ce[0],me=ce[1],de=(0,i.useState)(),he=(0,r.Z)(de,2),pe=he[0],fe=he[1],ge=(0,i.useState)("Select Status"),Ze=(0,r.Z)(ge,2),Ne=Ze[0],xe=Ze[1],ye=(0,i.useState)([]),ve=(0,r.Z)(ye,2),Se=ve[0],Ce=ve[1],Ie=(0,i.useState)("Select TimeZone"),Fe=(0,r.Z)(Ie,2),je=Fe[0],De=Fe[1],be=(0,i.useState)(!1),He=(0,r.Z)(be,2),_e=He[0],we=He[1],Ge=(0,i.useState)([]),Re=(0,r.Z)(Ge,2),ke=Re[0],Ve=Re[1],Le=(0,i.useState)({name:!1,organisation:!1,maxRuns:!1,topX:!1,timeZone:!1,code:!1,dayHourStart:!1}),Ee=(0,r.Z)(Le,2),qe=Ee[0],Ae=Ee[1],Oe=(0,i.useState)(""),Be=(0,r.Z)(Oe,2),Te=Be[0],Pe=Be[1],ze=(0,i.useState)(""),Ke=(0,r.Z)(ze,2),Me=Ke[0],Ue=Ke[1],Xe=(0,i.useState)(""),We=(0,r.Z)(Xe,2),Qe=We[0],Je=We[1],Ye=(0,i.useState)(""),$e=(0,r.Z)(Ye,2),et=$e[0],tt=$e[1],at=(0,i.useState)(""),nt=(0,r.Z)(at,2),rt=nt[0],it=nt[1],ot=(0,i.useState)(""),lt=(0,r.Z)(ot,2),st=lt[0],ct=lt[1],ut=(0,i.useState)({}),mt=(0,r.Z)(ut,2),dt=mt[0],ht=mt[1],pt=(0,i.useState)(!1),ft=(0,r.Z)(pt,2),gt=ft[0],Zt=ft[1],Nt=(0,i.useState)(!1),xt=(0,r.Z)(Nt,2),yt=xt[0],vt=xt[1],St=function(e,t){return e="0"===(e=""===(e=w.getNumbersOnly(e))?"":String(Math.min(parseInt(e,10),t)))?"":e};function Ct(e){var t=e.toString();return 1===t.length?"0"+t:t}var It=function(e){if(e.dayHourStart){var t=e,a=e.dayHourStart.getHours(),n=Ct(e.dayHourStart.getMinutes()),i=Ct(a)+":"+n;return t.dayHourStart=function(e){if(e&&"string"===typeof e){var t=e.split(":"),a=(0,r.Z)(t,2),n=a[0],i=a[1];return"".concat(n,":").concat(i,":00")}return e}(i),t}return parametersClone},Ft=function(e){var t=e.target.value;"frameRate"===e.target.name&&(t=St(t,99)),"dayHourStart"===e.target.name&&(t=St(t,24)),Y((function(a){return(0,n.Z)((0,n.Z)({},a),{},(0,m.Z)({},e.target.name,t))}))},jt=function(){var e,a,r=!0;return Ae({channelName:!1,organisation:!1,channelGroup:!1,timeZone:!1,code:!1,dayHourStart:!1}),Pe(""),Ue(""),Je(""),tt(""),it(""),0===J.organisationID&&(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{organisation:!0})})),Ue("Organisation is required")),0===J.channelGroupID&&(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{channelGroup:!0})})),Je("Channel group is required")),R(J.channelName)?(e=J.channelName,a=J.organisationID,c.some((function(n){return n.channelName.toLowerCase()===e.trim().toLowerCase()&&n.organisationID===a&&n.channelId!==t.channelId}))&&(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{channelName:!0})})),Pe("Channel name is used"))):(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{channelName:!0})})),Pe("Channel name is required")),0!==J.timeZoneID&&null!==J.timeZoneID||(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{timeZone:!0})})),tt("Timezone is required")),R(J.dayHourStart)||(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{dayHourStart:!0})})),ct("Start of day is required")),R(J.code)?0!==J.organisationID&&function(e,a){return c.some((function(n){return null!==n.code&&n.code.toLowerCase()===e.trim().toLowerCase()&&n.organisationID===a&&n.channelId!==t.channelId}))}(J.code,J.organisationID)&&(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{code:!0})})),it("Channel code is used")):(r=!1,Ae((function(e){return(0,n.Z)((0,n.Z)({},e),{},{code:!0})})),it("Channel code is required")),r},Dt=function(e){pe===J.timeInterval||e?(z(""),X(!0),U||(jt()?j.Z.updateChannel(t.channelId,It(J)).then((function(){a(),o(),(0,H.Vp)("Channel updated successfully")})).catch((function(e){var t=e.response.data.message;(0,H.h)(t),we(!1)})).finally((function(){X(!1)})):((0,H.h)("Please check required fields"),X(!1),we(!1)))):we(!0)},bt=function(){we(!1)},Ht=function(e){X(!0),j.Z.getChannelGroups(e).then((function(e){var t=e.data.channelGroups,a=[];t.map((function(e){return a.push({id:e.channelGroupId,name:e.channelGroupName}),!0})),Ce(a),X(!1)}))},_t=function(e){ae(e.name),Y((function(t){return(0,n.Z)((0,n.Z)({},t),{},{organisationID:e.id})})),le("Select Channel Group");var t="?organisationFilter=1&organisationFilterValue=".concat(e.name);Ht(t)},wt=function(e){xe(e.name),Y((function(t){return(0,n.Z)((0,n.Z)({},t),{},{indicatorStatus:e.id})}))},Gt=function(e){le(e.name),Y((function(t){return(0,n.Z)((0,n.Z)({},t),{},{channelGroupID:e.id})}))},Rt=function(e){me(e),Y((0,n.Z)((0,n.Z)({},J),{},{timeInterval:e.value}))};function kt(e){if(e){var t=e.split(":"),a=(0,r.Z)(t,2),n=a[0],i=a[1],o=new Date;return o.setHours(parseInt(n)),o.setMinutes(parseInt(i)),o}return""}var Vt=function(e){De(e.name),Y((function(t){return(0,n.Z)((0,n.Z)({},t),{},{timeZoneID:e.id})}))};(0,i.useEffect)((function(){if(l.Z.isOrganisationalAdmin()){var e={organisationFilter:l.Z.getUserIdentity().organisationId,organisationFilterValue:l.Z.getUserIdentity().organisationName},t="?organisationFilter=".concat(e.organisationFilter,"&organisationFilterValue=").concat(e.organisationFilterValue);Ht(t),Y((0,n.Z)((0,n.Z)({},J),{},{organisationID:e.organisationFilter}))}}),[]),(0,i.useEffect)((function(){vt(!0),j.Z.getChannel(t.channelId).then((function(e){ae(e.data.organisationName),le(e.data.channelGroupName),xe(e.data.status),Y({channelID:e.data.channelId,channelName:e.data.channelName,systemName:e.data.systemName,frameRate:e.data.frameRate?e.data.frameRate:"",organisationID:e.data.organisationID,channelGroupID:e.data.channelGroupID,indicatorStatus:e.data.indicatorStatus,timeZoneID:e.data.timeZoneID,timeInterval:e.data.timeInterval,code:null==e.data.code?"":e.data.code,dayHourStart:null!==e.data.dayHourStart?kt(e.data.dayHourStart):""}),ht({dateCreated:s.Z.toLocalFormat(e.data.dateCreated)}),De(""===e.data.timeZoneName?"Select TimeZone":e.data.timeZoneName),vt(!1);var t=D.timeIntervals.find((function(t){return t.value===e.data.timeInterval}));me(t),fe(e.data.timeInterval)})),vt(!0),j.Z.getTimezoneLookup().then((function(e){var t=e.data;Ve(t),vt(!1)}))}),[t.channelId]);var Lt=function(e){return"channelName"===e.parameterName?Te:"organisationID"===e.parameterName?Me:"channelGroup"===e.parameterName?Qe:"timeZone"===e.parameterName?et:"code"===e.parameterName?rt:"dayHourStart"===e.parameterName?st:""},Et=function(e){return"channelName"===e.parameterName?qe.channelName:"organisationID"===e.parameterName?qe.organisationID:"channelGroup"===e.parameterName?qe.channelGroup:"timeZone"===e.parameterName?qe.timeZone:"code"===e.parameterName?qe.code:"dayHourStart"===e.parameterName&&qe.dayHourStart};return(0,G.jsxs)("div",{className:d,children:[(0,G.jsx)("div",{className:"position-relative",children:(0,G.jsx)("i",{children:(0,G.jsx)("img",{className:h,src:S.Z,alt:"",onClick:function(){return a()},onKeyDown:function(){return a()},role:"presentation"})})}),yt?(0,G.jsx)("div",{className:"".concat(A),style:{fontSize:"28px"},children:(0,G.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:(0,G.jsx)("div",{children:(0,G.jsx)(_.default,{})})})}):(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:v,children:[(0,G.jsx)("div",{className:"d-flex position-relative",children:(0,G.jsx)("p",{className:p,children:"Edit Channel"})}),u.map((function(e){return(0,G.jsxs)("div",{children:[(0,G.jsxs)("div",{className:f,hidden:"Organisation"===e.name&&l.Z.isOrganisationalAdmin(),children:[e.name," ",e.isRequired?(0,G.jsx)("span",{className:y,children:"*"}):void 0]}),(0,G.jsxs)("div",{children:[("channelName"===e.parameterName||"code"===e.parameterName||"systemName"===e.parameterName||"frameRate"===e.parameterName)&&(0,G.jsx)("input",{className:g,name:e.parameterName&&e.parameterName,type:e.type,placeholder:e.placeHolder,value:J[e.parameterName],onChange:Ft,maxLength:e.maxLength,onKeyDown:function(e){return e.target.maxLength<=e.target.value.length&&"Backspace"!==e.key&&e.preventDefault()}}),"dayHourStart"===e.parameterName&&(0,G.jsx)(F.Z,{value:J.dayHourStart,onChange:function(e){return function(e){Y((function(t){return(0,n.Z)((0,n.Z)({},t),{},{dayHourStart:e})}))}(e)},channelForms:!0}),"channelGroup"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:oe,list:Se,onSelect:Gt,width:"100%",disabled:!l.Z.isOrganisationalAdmin(),withSearch:!0}),"timeInterval"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:"".concat(ue.value," Hour").concat(ue.value>1?"s":""),list:D.timeIntervals,onSelect:Rt,height:"149px",width:"100%"}),"organisationID"===e.parameterName&&!l.Z.isOrganisationalAdmin()&&(0,G.jsx)(b.Z,{label:"",text:te,list:ne,onSelect:_t,width:"100%",disabled:!0,withSearch:!0}),"timeZone"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:je,list:ke,onSelect:Vt,width:"100%",disabled:!1,withSearch:!0}),"status"===e.parameterName&&(0,G.jsx)(b.Z,{label:"",text:Ne,list:k,onSelect:wt,width:"100%",disabled:!1}),Et(e)&&(0,G.jsx)("span",{className:x,children:Lt(e)})]})]},e.id)})),(0,G.jsx)("div",{className:"".concat(L," d-flex"),children:(0,G.jsx)("div",{children:(0,G.jsxs)("p",{children:["Date Created"," ",(0,G.jsx)("br",{})," ",(0,G.jsx)("span",{children:dt.dateCreated})]})})}),(0,G.jsxs)("div",{className:"position-absolute start-0 bottom-0 text-center",style:{width:"100%",marginBottom:"10px"},children:[(0,G.jsx)("i",{className:Z,style:{pointerEvent:yt&&"none"},"data-toggle":"tooltip","data-placement":"top",title:"Update channel",children:(0,G.jsx)("img",{src:C.Z,alt:"",onClick:function(){return Dt(!1)},onKeyDown:function(){return Dt(!1)},role:"presentation"})}),(0,G.jsx)("i",{className:N,children:(0,G.jsx)("img",{src:I.Z,alt:"",onClick:function(){return a()},onKeyDown:function(){return a()},role:"presentation","data-toggle":"tooltip","data-placement":"top",title:"Cancel"})}),""!==P&&P]})]})}),(0,G.jsx)(V.Z,{size:"md",show:gt,onHide:function(){return Zt(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:(0,G.jsxs)(V.Z.Body,{style:{padding:"35px"},children:[(0,G.jsx)("div",{style:{textAlign:"center"},children:"You are permanently deleting this channel group"}),(0,G.jsx)("div",{style:{textAlign:"center",fontSize:"20px"},children:"Are you sure you want to proceed?"}),(0,G.jsxs)("div",{style:{textAlign:"center",paddingTop:"30px"},children:[(0,G.jsx)("button",{className:q,onClick:function(){return Zt(!1)},type:"button",children:"Cancel"}),(0,G.jsx)("button",{className:E,onClick:function(){},type:"button",children:"Proceed"})]})]})}),(0,G.jsx)(V.Z,{show:_e,onHide:bt,size:"lg",centered:!0,children:(0,G.jsxs)("div",{style:{padding:"30px 50px",textAlign:"center"},children:[(0,G.jsxs)("p",{style:{fontSize:"17px"},children:["Some profiles may already have existing values defined under the"," ","existing time interval. Changing this channel's profile time interval"," ","will result in losing saved values from the previously saved profiles"," ","under the existing time interval."]}),(0,G.jsx)("p",{style:{fontSize:"20px",fontWeight:"600"},children:"Are you sure you want to proceed?"}),(0,G.jsxs)("div",{children:[(0,G.jsx)(O.Z,{defaultBtn:!0,text:"Cancel",onClick:bt}),(0,G.jsx)(O.Z,{text:"Proceed",onClick:function(){return Dt(!0)}})]})]})})]})}B.defaultProps={channels:null};var T=B;var P=function(){var e=l.Z.isOrganisationalAdmin(),t=(0,i.useState)(!1),a=(0,r.Z)(t,2),m=a[0],d=a[1],h=(0,i.useState)(!1),p=(0,r.Z)(h,2),f=p[0],g=p[1],Z=(0,i.useState)(),N=(0,r.Z)(Z,2),x=N[0],y=N[1],v=(0,i.useState)([]),S=(0,r.Z)(v,2),C=S[0],I=S[1],F=(0,i.useState)([]),b=(0,r.Z)(F,2),H=b[0],_=b[1],w=(0,i.useState)({}),R=(0,r.Z)(w,2),V=R[0],L=R[1],E=(0,i.useState)({}),q=(0,r.Z)(E,2),A=q[0],O=q[1],B=(0,i.useState)({}),P=(0,r.Z)(B,2),z=P[0],K=P[1],M=(0,i.useState)({order:1,sort:2}),U=(0,r.Z)(M,2),X=U[0],W=U[1],Q=(0,i.useState)(!1),J=(0,r.Z)(Q,2),Y=J[0],$=J[1],ee=(0,i.useState)([]),te=(0,r.Z)(ee,2),ae=te[0],ne=te[1],re=function(e){var t="?pageNumber=".concat(e.pageNumber?e.pageNumber:1,"\n    &pageSize=").concat(e.pageSize?e.pageSize:50),a=e.organisationFilter&&e.organisationFilterValue?"&organisationFilter=".concat(e.organisationFilter,"&organisationFilterValue=").concat(e.organisationFilterValue):"",n=e.groupFilter&&e.groupFilterValue?"&groupFilter=".concat(e.groupFilter,"&groupFilterValue=").concat(e.groupFilterValue):"",r=e.runsFilter&&e.runsFilterValue?"&runsFilter=".concat(e.runsFilter,"&runsFilterValue=").concat(e.runsFilterValue):"",i=e.topRatedFilter&&e.topRatedFilterValue?"&topRatedFilter=".concat(e.topRatedFilter,"&topRatedFilterValue=").concat(e.topRatedFilterValue):"",o=e.channelFilter&&e.channelFilterValue?"&channelFilter=".concat(e.channelFilter,"&channelFilterValue=").concat(e.channelFilterValue):"",l=e.timeZoneFilter&&e.timeZoneFilterValue?"&timeZoneFilter=".concat(e.timeZoneFilter,"&timeZoneFilterValue=").concat(e.timeZoneFilterValue):"";null!=l&&l.includes("+")&&(l=l.replace("+","%2B"));var s=e.statusFilter?"&statusFilter=".concat(e.statusFilter.map((function(e){return e.name})).join("-")):"",c=e.sortOrder&&e.sortBy?"&sort=".concat(e.sortBy,"&sortBy=").concat(e.sortOrder):"",u=e.searchKey?"&SearchKey=".concat(e.searchKey):"";null!=e.searchKey&&e.searchKey.includes("+")&&(u=u.replace("+","%2B"));var m=t+a+n+r+i+o+l+s+c+u+(e.useCache?"&useCache=".concat(e.useCache):"");return m.includes("+")&&(m=m.replace("+","%2B")),m},ie=function(t,a){var n=t;return"TABLE"===a?n=n.map((function(t){return{channelId:t.channelId,organisationName:e?"hidden:".concat(t.organisationName):t.organisationName,channelName:t.channelName,status:t.status,timeZone:t.timeZone,channelGroupName:t.channelGroupName,maxRuns:t.maxRuns,topX:t.topX}})):"FORM"===a&&(n=n.map((function(t){return{channelId:t.channelId,organisationName:e?"hidden:".concat(t.organisationName):t.organisationName,channelName:t.channelName,status:t.status,timeZone:t.timeZone,channelGroupName:t.channelGroupName,maxRuns:t.maxRuns,topX:t.topX,code:t.code,organisationID:t.organisationID}}))),n},oe=function(){d(!0),j.Z.getChannels(re(V)).then((function(e){_(ie(e.data.channels,"TABLE")),ne(ie(e.data.channels,"FORM")),K({totalCount:e.data.totalCount,pageSize:e.data.pageSize,currentPage:e.data.currentPage,totalPages:e.data.totalPages})})).finally((function(){return d(!1)}))},le=function(){y(),$(!1)};return(0,i.useEffect)((function(){!function(){var t=D.tableHeaders;e&&(t=t.filter((function(e){return 1!==e.headerId}))),I(t)}()}),[]),(0,i.useEffect)((function(){var e;O({organisationFilter:(e=V).organisationFilter,organisationFilterValue:e.organisationFilterValue,groupFilter:e.groupFilter,groupFilterValue:e.groupFilterValue,runsFilter:e.runsFilter,runsFilterValue:e.runsFilterValue,topRatedFilter:e.topRatedFilter,topRatedFilterValue:e.topRatedFilterValue,timeZoneFilter:e.timeZoneFilter,timeZoneFilterValue:e.timeZoneFilterValue,channelFilter:e.channelFilter,channelFilterValue:e.channelFilterValue,statusFilter:e.statusFilter}),oe()}),[V]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(u.Z,{componentName:"Channels",isAddButtonHidden:!1,addButtonText:"New Channel",callbackAddButtonFunction:function(){$(!0),y()},handleSearch:function(e){L((0,n.Z)((0,n.Z)({},V),{},{searchKey:e,pageNumber:1}))}}),(0,G.jsx)("hr",{style:{borderTop:"1px  solid #b1b1b1",marginBottom:"8px"}}),(0,G.jsxs)("div",{className:"d-flex",children:[(0,G.jsx)(c.Z,{noDataVerbiage:"No channels found",headers:C,list:H,isExporting:f,isFetchingData:m,queryParameters:A,paginationParameters:z,sortParameters:X,onFilter:function(e){L((0,n.Z)((0,n.Z)((0,n.Z)({},V),e),{},{pageNumber:1}))},onClearFilters:function(){L({pageNumber:1,pageSize:V.pageSize,searchKey:V.searchKey})},onSort:function(e){var t=e.sortBy,a=e.sortOrder;W({order:a,sort:t}),L((0,n.Z)((0,n.Z)({},V),{},{sortBy:t,sortOrder:a}))},onPaginate:function(e,t){L((0,n.Z)((0,n.Z)({},V),{},{pageNumber:e,pageSize:t}))},onExport:function(){if(!f){var e=l.Z.getUserIdentity().organisationName;g(!0),j.Z.exportChannels(re(V)).then((function(t){var a=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,o.saveAs)(a,"".concat(e?"".concat(e.toLowerCase(),"_"):"","op2mise_channels_data_export_").concat(s.Z.toExportFormat(new Date),".xlsx"))})).finally((function(){return g(!1)}))}},onDoubleClickSelectData:function(e){y(e),$(!1)}}),Y&&(0,G.jsx)(k,{channels:ae,callbackGetChannels:oe,callbackClosePanel:le}),x&&(0,G.jsx)(T,{channels:ae,selectedChannel:x,callbackGetChannels:oe,callbackClosePanel:le})]})]})}},7457:function(e,t,a){var n=a(4569),r=a.n(n),i={addChannel:function(e){var t="".concat("https://localhost:44357/api/","Channel/AddChannel");return r().post(t,e)},updateChannel:function(e,t){var a="".concat("https://localhost:44357/api/","Channel/EditChannel/").concat(e);return r().put(a,t)},getChannelGroups:function(e){var t="".concat("https://localhost:44357/api/","ChannelGroup/GetChannelGroupLookup").concat(e);return r().get(t)},getChannel:function(e){var t="".concat("https://localhost:44357/api/","Channel/GetChannelById/").concat(e);return r().get(t)},exportChannels:function(e){var t="".concat("https://localhost:44357/api/","Channel/Export").concat(e);return r().get(t,{responseType:"arraybuffer"})},getOrganisations:function(){var e="".concat("https://localhost:44357/api/","Organisation/GetAllOrganisations");return r().get(e)},getChannels:function(e){var t="".concat("https://localhost:44357/api/","Channel/GetChannelList").concat(e);return r().get(t)},getTimezoneLookup:function(){var e="".concat("https://localhost:44357/api/","Channel/GetTimeZoneLookup");return r().get(e)},exportSampleTemplate:function(){var e="".concat("https://localhost:44357/api/","Channel/SampleDataExport");return r().get(e,{responseType:"arraybuffer"})}};t.Z=i},4895:function(e,t,a){a.d(t,{Z:function(){return g}});var n=a(885),r=a(2791),i=a(2426),o=a.n(i),l="styles_timeInput__GBAx4",s="styles_timeInputWrapper__GFyGF",c="styles_hourInput__I3zdk",u="styles_minuteInput__NrxBH",m="styles_inputDivider__QJbWQ",d="styles_invalidInput__M3CH7",h="styles_errorMessage__SVjpw",p="styles_disabledInput__ngBKX",f=a(184),g=(0,r.forwardRef)((function(e,t){var a=e.value,i=e.onChange,g=e.disabled,Z=e.validate,N=e.onValidate,x=e.errorMessage,y=e.clearValues,v=e.min,S=e.max,C=e.defaultValue,I=e.customWrapper,F=e.channelForms,j=(0,r.useRef)(),D=(0,r.useRef)(),b=(0,r.useState)(!1),H=(0,n.Z)(b,2),_=H[0],w=H[1],G=(0,r.useState)(""),R=(0,n.Z)(G,2),k=R[0],V=R[1],L=(0,r.useState)(""),E=(0,n.Z)(L,2),q=E[0],A=E[1],O=(0,r.useState)(0),B=(0,n.Z)(O,2),T=B[0],P=B[1],z=(0,r.useState)(!1),K=(0,n.Z)(z,2),M=K[0],U=K[1],X="function"===typeof N&&Z,W=function(){setTimeout((function(){j.current.focus(),j.current.select()}),1)},Q=function(){setTimeout((function(){D.current.focus(),D.current.select()}),1)},J=function(e){return e.target.select()},Y=function(e){return e.stopPropagation()},$=function(){return P(0)},ee=function(e){return 1===e.length?"0".concat(e):"0"===e[0]?e.substring(1,3):e},te=function(e){var t=e.target.name,a=e.target.value.split("").filter((function(e){return!isNaN(e)&&!isNaN(parseFloat(e))})).join(""),n="0"===(a=ee(a))[0],r=a&&!function(e,t){var a=parseInt(e);return"hour"===t?a<=23:a<=59}(a,t);if("hour"!==t||1!==T&&3!==a.length||2!==a.length&&!r||Q(),!n&&(function(e){return 3===e.length}(a)||r))return!1;"hour"===t?(V(a),k||q||A("00")):A(a),P(T+1),w(!0)},ae=function(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes(),r=ee(a.toString()),i=ee(n.toString());V(r),A(i)};return(0,r.useEffect)((function(){C&&(C&&o()(C).isValid()&&ae(C))}),[C]),(0,r.useEffect)((function(){F?a&&!_||!k||!q?a&&o()(a).isValid()&&ae(a):a||(V(""),A("")):(!a||_)&&k&&q||a&&o()(a).isValid()&&ae(a)}),[a]),(0,r.useEffect)((function(){if(_)if(k&&q){var e=new Date(0,0,0,parseInt(k),parseInt(q),0,0);"function"===typeof i&&i(e);var t=function(e){var t=!1;if(S){var a=S.toLocaleString().split(" ");t="AM"==a[2]&&"12:00:00"==a[1]}return!!v&&e<v||!!S&&e>S&&!t}(e);"function"===typeof N&&N(t)}else"function"===typeof i&&i(null),U(!k||!q),"function"===typeof N&&N(!k||!q);else"function"===typeof N&&N(!1)}),[k,q]),(0,r.useEffect)((function(){y&&(V(""),A(""))}),[y]),(0,f.jsxs)("div",{className:l,children:[(0,f.jsxs)("div",{ref:t,className:"\n                    ".concat(s,"\n                    ").concat(X&&!g&&d,"\n                    ").concat(g&&p,"\n                    ").concat(I&&I,"\n                "),onClick:W,children:[(0,f.jsx)("input",{ref:j,className:c,style:{marginLeft:k&&"-5px"},value:k,name:"hour",type:"text",placeholder:"HH",autoComplete:"off",onChange:te,onKeyDown:function(e){if("ArrowRight"===e.key&&Q(),"ArrowUp"===e.key){var t=parseInt(k)+1;t<=23&&V(ee(t.toString()))}if("ArrowDown"===e.key){var a=parseInt(k)-1;a>=0&&V(ee(a.toString()))}"Backspace"===e.key&&(V(""),P(0),w(!0))},onFocus:J,onClick:Y,onBlur:$,disabled:g}),(0,f.jsx)("span",{className:m,children:":"}),(0,f.jsx)("input",{ref:D,className:u,value:q,name:"minute",type:"text",placeholder:"MM",autoComplete:"off",onChange:te,onKeyDown:function(e){if("ArrowLeft"===e.key&&W(),"ArrowUp"===e.key){var t=parseInt(q)+1;t<=59&&A(ee(t.toString()))}if("ArrowDown"===e.key){var a=parseInt(q)-1;a>=0&&A(ee(a.toString()))}"Backspace"===e.key&&(A(""),w(!0))},onFocus:J,onClick:Y,onBlur:$,disabled:g})]}),X&&M&&!g&&(0,f.jsx)("span",{className:h,children:x})]})}))}}]);
//# sourceMappingURL=794.098f6c77.chunk.js.map